{
  "openapi": "3.0.0",
  "info": {
    "title": "Language Learning AI API",
    "description": "A powerful AI-driven backend API for language learning applications",
    "version": "2.8.29alpha"
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Development server"
    }
  ],
  "paths": {
    "/api/words": {
      "get": {
        "summary": "Get all words",
        "description": "Retrieve a paginated list of words with optional filtering",
        "tags": [
          "Words"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Page number for pagination",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "wordUser",
            "in": "query",
            "description": "Filter by word name (partial match)",
            "schema": {
              "type": "string",
              "example": "example"
            }
          },
          {
            "name": "language",
            "in": "query",
            "description": "Filter by language (comma-separated for multiple)",
            "schema": {
              "type": "string",
              "example": "en,es"
            }
          },
          {
            "name": "difficulty",
            "in": "query",
            "description": "Filter by difficulty level (comma-separated for multiple)",
            "schema": {
              "type": "string",
              "enum": [
                "easy",
                "medium",
                "hard"
              ],
              "example": "easy,medium"
            }
          },
          {
            "name": "type",
            "in": "query",
            "description": "Filter by word type (comma-separated for multiple)",
            "schema": {
              "type": "string",
              "example": "noun,verb"
            }
          },
          {
            "name": "seenMin",
            "in": "query",
            "description": "Minimum number of times the word has been seen",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "example": 5
            }
          },
          {
            "name": "seenMax",
            "in": "query",
            "description": "Maximum number of times the word has been seen",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "example": 20
            }
          },
          {
            "name": "sortBy",
            "in": "query",
            "description": "Field to sort by",
            "schema": {
              "type": "string",
              "enum": [
                "createdAt",
                "updatedAt",
                "word",
                "seen",
                "level"
              ],
              "default": "createdAt",
              "example": "createdAt"
            }
          },
          {
            "name": "sortOrder",
            "in": "query",
            "description": "Sort order",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc",
              "example": "desc"
            }
          },
          {
            "name": "definition",
            "in": "query",
            "description": "Filter by definition content",
            "schema": {
              "type": "string",
              "example": "example"
            }
          },
          {
            "name": "IPA",
            "in": "query",
            "description": "Filter by IPA pronunciation",
            "schema": {
              "type": "string",
              "example": "/ɪɡˈzæmpəl/"
            }
          },
          {
            "name": "hasImage",
            "in": "query",
            "description": "Filter by words that have an image",
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ],
              "example": "true"
            }
          },
          {
            "name": "hasExamples",
            "in": "query",
            "description": "Filter by words that have examples",
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ],
              "example": "true"
            }
          },
          {
            "name": "hasSynonyms",
            "in": "query",
            "description": "Filter by words that have synonyms",
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ],
              "example": "true"
            }
          },
          {
            "name": "hasCodeSwitching",
            "in": "query",
            "description": "Filter by words that have code-switching examples",
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ],
              "example": "true"
            }
          },
          {
            "name": "spanishWord",
            "in": "query",
            "description": "Filter by Spanish word translation",
            "schema": {
              "type": "string",
              "example": "ejemplo"
            }
          },
          {
            "name": "spanishDefinition",
            "in": "query",
            "description": "Filter by Spanish definition",
            "schema": {
              "type": "string",
              "example": "ejemplo representativo"
            }
          },
          {
            "name": "createdAfter",
            "in": "query",
            "description": "Filter by creation date after this date (ISO 8601)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2024-01-01T00:00:00Z"
            }
          },
          {
            "name": "createdBefore",
            "in": "query",
            "description": "Filter by creation date before this date (ISO 8601)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2024-12-31T23:59:59Z"
            }
          },
          {
            "name": "updatedAfter",
            "in": "query",
            "description": "Filter by update date after this date (ISO 8601)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2024-01-01T00:00:00Z"
            }
          },
          {
            "name": "updatedBefore",
            "in": "query",
            "description": "Filter by update date before this date (ISO 8601)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2024-12-31T23:59:59Z"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "List of words retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Words retrieved successfully"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Word"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/PaginationResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a new word",
        "description": "Create a new word with all its properties",
        "tags": [
          "Words"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Word"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Word created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Word created successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Word"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/words/{id}": {
      "get": {
        "summary": "Get word by ID",
        "description": "Retrieve a specific word by its unique identifier",
        "tags": [
          "Words"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Unique identifier of the word",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Word found successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Word listed by Id successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Word"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Word not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update word",
        "description": "Update an existing word with new data",
        "tags": [
          "Words"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Unique identifier of the word to update",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Word"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Word updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Word updated successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Word"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Word not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete word",
        "description": "Delete a word permanently",
        "tags": [
          "Words"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Unique identifier of the word to delete",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Word deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Word deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Word not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/words/{word}/word": {
      "get": {
        "summary": "Get word by name",
        "description": "Retrieve a word by its actual word value (not ID)",
        "tags": [
          "Words"
        ],
        "parameters": [
          {
            "name": "word",
            "in": "path",
            "required": true,
            "description": "The actual word to search for",
            "schema": {
              "type": "string",
              "example": "example"
            }
          },
          {
            "name": "word",
            "in": "query",
            "required": false,
            "description": "Alternative way to pass the word as query parameter",
            "schema": {
              "type": "string",
              "example": "example"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Word found successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Get Word successFully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Word"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Word not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/words/anki-cards": {
      "get": {
        "summary": "Get Anki cards",
        "description": "Retrieve words formatted as Anki flashcards for spaced repetition learning",
        "tags": [
          "Words"
        ],
        "parameters": [
          {
            "name": "mode",
            "in": "query",
            "description": "Mode for retrieving cards",
            "schema": {
              "type": "string",
              "enum": [
                "random",
                "review"
              ],
              "default": "random",
              "example": "random"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of cards to retrieve",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 30,
              "example": 30
            }
          },
          {
            "name": "difficulty",
            "in": "query",
            "description": "Filter by difficulty levels (comma-separated)",
            "schema": {
              "type": "string",
              "example": "hard,medium"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Anki cards retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Anki cards retrieved successfully"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/AnkiCard"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/words/by-type-optimized": {
      "get": {
        "summary": "Get words by type (optimized)",
        "description": "Retrieve words grouped by their grammatical type with optimized performance",
        "tags": [
          "Words"
        ],
        "parameters": [
          {
            "name": "type",
            "in": "query",
            "required": true,
            "description": "Grammatical type to filter by",
            "schema": {
              "type": "string",
              "example": "noun"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of words to retrieve",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 10,
              "example": 10
            }
          },
          {
            "name": "wordUser",
            "in": "query",
            "description": "Search term for filtering words",
            "schema": {
              "type": "string",
              "example": "example"
            }
          },
          {
            "name": "fields",
            "in": "query",
            "description": "Specific fields to include in response",
            "schema": {
              "type": "string",
              "example": "word,definition,type"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Words by type retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Words by type retrieved successfully"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Word"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/words/export-file": {
      "get": {
        "summary": "Export words to JSON",
        "description": "Export all words to a downloadable JSON file",
        "tags": [
          "Words"
        ],
        "responses": {
          "200": {
            "description": "Words exported successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Words exported successfully"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Word"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/words/import-file": {
      "post": {
        "summary": "Import words from JSON file",
        "description": "Import words from an uploaded JSON file",
        "tags": [
          "Words"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "JSON file containing words data"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Words imported successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Words imported successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "imported": {
                          "type": "integer",
                          "description": "Number of words imported"
                        },
                        "errors": {
                          "type": "integer",
                          "description": "Number of import errors"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid file format",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/words/generate": {
      "post": {
        "summary": "Generate word with AI",
        "description": "Generate a new word with definition, examples, and metadata using AI",
        "tags": [
          "Words"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AIGenerationRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Word generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Word generated successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Word"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/words/{idword}/generate-examples": {
      "post": {
        "summary": "Generate word examples with AI",
        "description": "Generate example sentences for a specific word using AI",
        "tags": [
          "Words"
        ],
        "parameters": [
          {
            "name": "idword",
            "in": "path",
            "required": true,
            "description": "ID of the word to generate examples for",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "language": {
                    "type": "string",
                    "description": "Language for examples",
                    "example": "en"
                  },
                  "count": {
                    "type": "integer",
                    "description": "Number of examples to generate",
                    "example": 3
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Examples generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Examples generated successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "examples": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Word not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/words/{idword}/generate-code-switching": {
      "post": {
        "summary": "Generate code-switching examples",
        "description": "Generate code-switching examples for a word using AI. Requires either 'prompt' or 'word' in the request body.",
        "tags": [
          "Words"
        ],
        "parameters": [
          {
            "name": "idword",
            "in": "path",
            "required": true,
            "description": "ID of the word to generate code-switching examples for",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "prompt": {
                    "type": "string",
                    "description": "Prompt text for generation (alternative to 'word')"
                  },
                  "word": {
                    "type": "string",
                    "description": "Target word (alternative to 'prompt')"
                  },
                  "language": {
                    "type": "string",
                    "description": "Language for examples (e.g., 'en', 'es')",
                    "example": "es"
                  },
                  "oldExamples": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Existing examples to avoid duplicates"
                  },
                  "provider": {
                    "type": "string",
                    "enum": [
                      "openai",
                      "other"
                    ],
                    "default": "openai",
                    "description": "AI provider to use"
                  }
                },
                "required": [
                  "language"
                ],
                "anyOf": [
                  {
                    "required": [
                      "prompt"
                    ]
                  },
                  {
                    "required": [
                      "word"
                    ]
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Code-switching examples generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Code-switching examples generated successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "codeSwitching": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Missing required fields (prompt/word or language)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Word not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/words/{idword}/generate-types": {
      "post": {
        "summary": "Generate word types with AI",
        "description": "Generate grammatical types for a word using AI",
        "tags": [
          "Words"
        ],
        "parameters": [
          {
            "name": "idword",
            "in": "path",
            "required": true,
            "description": "ID of the word to generate types for",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Word types generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Word types generated successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "types": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Word not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/words/{idword}/generate-synonyms": {
      "post": {
        "summary": "Generate word synonyms with AI",
        "description": "Generate synonyms for a word using AI",
        "tags": [
          "Words"
        ],
        "parameters": [
          {
            "name": "idword",
            "in": "path",
            "required": true,
            "description": "ID of the word to generate synonyms for",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Synonyms generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Synonyms generated successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "synonyms": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Word not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/words/{idword}/generate-image": {
      "post": {
        "summary": "Generate word image with AI",
        "description": "Generate an image for a word using AI and update the word record",
        "tags": [
          "Words"
        ],
        "parameters": [
          {
            "name": "idword",
            "in": "path",
            "required": true,
            "description": "ID of the word to generate image for",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Image generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Image generated successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "imageUrl": {
                          "type": "string",
                          "description": "URL of the generated image"
                        },
                        "word": {
                          "$ref": "#/components/schemas/Word"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Word not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/words/{id}/level": {
      "put": {
        "summary": "Update word level",
        "description": "Update the difficulty level of a word",
        "tags": [
          "Words"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "ID of the word to update",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "level": {
                    "type": "string",
                    "enum": [
                      "easy",
                      "medium",
                      "hard"
                    ],
                    "description": "New difficulty level"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Word level updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Word level updated successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Word"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Word not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/words/{id}/increment-seen": {
      "put": {
        "summary": "Increment word seen count",
        "description": "Increment the number of times a word has been seen",
        "tags": [
          "Words"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "ID of the word to update",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Word seen count updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Word seen count updated successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Word"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Word not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/words/{wordId}/update-review": {
      "post": {
        "summary": "Update word review",
        "description": "Update the review status of a word for spaced repetition",
        "tags": [
          "Words"
        ],
        "parameters": [
          {
            "name": "wordId",
            "in": "path",
            "required": true,
            "description": "ID of the word to update review for",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "reviewStatus": {
                    "type": "string",
                    "enum": [
                      "correct",
                      "incorrect",
                      "difficult"
                    ],
                    "description": "Review status"
                  },
                  "nextReviewDate": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Next review date"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Word review updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Word review updated successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Word"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Word not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/words/{wordId}/chat": {
      "get": {
        "summary": "Get chat history for word",
        "description": "Retrieve chat history for a specific word",
        "tags": [
          "Words",
          "Chat"
        ],
        "parameters": [
          {
            "name": "wordId",
            "in": "path",
            "required": true,
            "description": "ID of the word to get chat history for",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Chat history retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Chat history retrieved successfully"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ChatMessage"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Word not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Add chat message for word",
        "description": "Add a new chat message for a specific word",
        "tags": [
          "Words",
          "Chat"
        ],
        "parameters": [
          {
            "name": "wordId",
            "in": "path",
            "required": true,
            "description": "ID of the word to add chat message for",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "description": "Chat message content",
                    "example": "Can you explain this word?"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "user",
                      "assistant"
                    ],
                    "description": "Role of the message sender",
                    "example": "user"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Chat message added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Chat message added successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/ChatMessage"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Word not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Clear chat history for word",
        "description": "Clear all chat history for a specific word",
        "tags": [
          "Words",
          "Chat"
        ],
        "parameters": [
          {
            "name": "wordId",
            "in": "path",
            "required": true,
            "description": "ID of the word to clear chat history for",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Chat history cleared successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Chat history cleared successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Word not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/words/{wordId}/chat/stream": {
      "post": {
        "summary": "Stream chat response for word",
        "description": "Get a streaming AI response for a word chat",
        "tags": [
          "Words",
          "Chat"
        ],
        "parameters": [
          {
            "name": "wordId",
            "in": "path",
            "required": true,
            "description": "ID of the word to get streaming response for",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "description": "User message to get AI response for",
                    "example": "Explain this word in detail"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Streaming response initiated successfully",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "description": "Streaming text response"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Word not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/expressions": {
      "get": {
        "summary": "Get all expressions",
        "description": "Retrieve a paginated list of expressions with optional filtering",
        "tags": [
          "Expressions"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Page number for pagination",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "search",
            "in": "query",
            "description": "Search in expression, definition, or Spanish translations",
            "schema": {
              "type": "string",
              "example": "break the ice"
            }
          },
          {
            "name": "type",
            "in": "query",
            "description": "Filter by expression type (can be multiple, comma-separated)",
            "schema": {
              "type": "string",
              "example": "idiom,phrase"
            }
          },
          {
            "name": "difficulty",
            "in": "query",
            "description": "Filter by difficulty level",
            "schema": {
              "type": "string",
              "enum": [
                "A1",
                "A2",
                "B1",
                "B2",
                "C1",
                "C2"
              ],
              "example": "B2"
            }
          },
          {
            "name": "language",
            "in": "query",
            "description": "Filter by language",
            "schema": {
              "type": "string",
              "example": "en"
            }
          },
          {
            "name": "hasImage",
            "in": "query",
            "description": "Filter by expressions that have an image",
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ],
              "example": "true"
            }
          },
          {
            "name": "hasContext",
            "in": "query",
            "description": "Filter by expressions that have context",
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ],
              "example": "true"
            }
          },
          {
            "name": "createdAt",
            "in": "query",
            "description": "Filter by creation date (ISO 8601)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2024-01-01T00:00:00Z"
            }
          },
          {
            "name": "updatedAt",
            "in": "query",
            "description": "Filter by update date (ISO 8601)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2024-01-01T00:00:00Z"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Expressions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Expressions retrieved successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "expressions": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Expression"
                          }
                        },
                        "pagination": {
                          "$ref": "#/components/schemas/PaginationResponse"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error retrieving expressions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a new expression",
        "description": "Create a new expression with all its properties",
        "tags": [
          "Expressions"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Expression"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Expression created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Expression created successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Expression"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/expressions/{id}": {
      "get": {
        "summary": "Get expression by ID",
        "description": "Retrieve a specific expression by its unique identifier",
        "tags": [
          "Expressions"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Unique identifier of the expression",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Expression retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Expression retrieved successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Expression"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Expression not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error retrieving expression",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update expression",
        "description": "Update an existing expression with new data",
        "tags": [
          "Expressions"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Unique identifier of the expression to update",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Expression"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Expression updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Expression updated successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Expression"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Expression not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete expression",
        "description": "Delete an expression permanently",
        "tags": [
          "Expressions"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Unique identifier of the expression to delete",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Expression deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Expression deleted successfully"
                    },
                    "data": {
                      "type": "object",
                      "example": {}
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Expression not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error deleting expression",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/expressions/export-file": {
      "get": {
        "summary": "Export expressions to JSON",
        "description": "Export all expressions to a downloadable JSON file",
        "tags": [
          "Expressions"
        ],
        "responses": {
          "200": {
            "description": "Expressions exported successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Exported 150 expressions successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalExpressions": {
                          "type": "integer",
                          "description": "Total number of expressions exported"
                        },
                        "exportDate": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Export timestamp"
                        },
                        "expressions": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Expression"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error exporting expressions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/expressions/import-file": {
      "post": {
        "summary": "Import expressions from JSON file",
        "description": "Import expressions from an uploaded JSON file with advanced options",
        "tags": [
          "Expressions"
        ],
        "parameters": [
          {
            "name": "duplicateStrategy",
            "in": "query",
            "description": "Strategy for handling duplicate expressions",
            "schema": {
              "type": "string",
              "enum": [
                "skip",
                "overwrite",
                "error",
                "merge"
              ],
              "default": "skip",
              "example": "skip"
            }
          },
          {
            "name": "validateOnly",
            "in": "query",
            "description": "Only validate without importing",
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ],
              "default": "false",
              "example": "false"
            }
          },
          {
            "name": "batchSize",
            "in": "query",
            "description": "Number of expressions to process per batch",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10,
              "example": 10
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "JSON file containing expressions data"
                  }
                },
                "required": [
                  "file"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Import completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Import completed successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "imported": {
                          "type": "integer",
                          "description": "Number of expressions imported"
                        },
                        "skipped": {
                          "type": "integer",
                          "description": "Number of expressions skipped"
                        },
                        "errors": {
                          "type": "integer",
                          "description": "Number of import errors"
                        },
                        "validationResults": {
                          "type": "array",
                          "description": "Validation results when validateOnly=true"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "No file uploaded, Invalid JSON file format, or Invalid parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error importing expressions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/expressions/generate": {
      "post": {
        "summary": "Generate expression with AI",
        "description": "Generate a new expression with definition, examples, and metadata using AI",
        "tags": [
          "Expressions"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "prompt": {
                    "type": "string",
                    "description": "Prompt for generating the expression",
                    "example": "Generate an idiom about friendship"
                  },
                  "options": {
                    "type": "object",
                    "description": "Additional options for generation",
                    "properties": {
                      "language": {
                        "type": "string",
                        "default": "en",
                        "description": "Language code"
                      },
                      "provider": {
                        "type": "string",
                        "enum": [
                          "openai",
                          "deepseek"
                        ],
                        "default": "openai",
                        "description": "AI provider to use for generation"
                      }
                    }
                  }
                },
                "required": [
                  "prompt"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Expression generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Expression generated successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Expression"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Prompt is required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error generating expression",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/expressions/{idexpression}/generate-image": {
      "post": {
        "summary": "Generate expression image with AI",
        "description": "Generate an image for an expression using AI and update the expression record",
        "tags": [
          "Expressions"
        ],
        "parameters": [
          {
            "name": "idexpression",
            "in": "path",
            "required": true,
            "description": "ID of the expression to generate image for",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "expressionString": {
                    "type": "string",
                    "description": "Expression text to generate image for",
                    "example": "break the ice"
                  },
                  "imgOld": {
                    "type": "string",
                    "description": "URL of old image to replace (optional)",
                    "example": "https://res.cloudinary.com/..."
                  }
                },
                "required": [
                  "expressionString"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Expression image updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Expression image updated successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Expression"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Expression prompt is required or Failed to generate image",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error generating expression image",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/expressions/by-type/{type}": {
      "get": {
        "summary": "Get expressions by type",
        "description": "Retrieve expressions filtered by specific type",
        "tags": [
          "Expressions"
        ],
        "parameters": [
          {
            "name": "type",
            "in": "path",
            "required": true,
            "description": "Expression type to filter by",
            "schema": {
              "type": "string",
              "example": "idiom"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of expressions to retrieve",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 10,
              "example": 10
            }
          },
          {
            "name": "search",
            "in": "query",
            "description": "Search term for filtering",
            "schema": {
              "type": "string",
              "example": "break"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Expressions by type retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Expressions of type idiom retrieved successfully"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Expression"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error getting expressions by type",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/expressions/expressions-only": {
      "get": {
        "summary": "Get expressions only (simplified)",
        "description": "Retrieve expressions with simplified response format for performance",
        "tags": [
          "Expressions"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Page number for pagination",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "search",
            "in": "query",
            "description": "Search in expression, definition, or Spanish translations",
            "schema": {
              "type": "string",
              "example": "break the ice"
            }
          },
          {
            "name": "type",
            "in": "query",
            "description": "Filter by expression type",
            "schema": {
              "type": "string",
              "example": "idiom"
            }
          },
          {
            "name": "difficulty",
            "in": "query",
            "description": "Filter by difficulty level",
            "schema": {
              "type": "string",
              "enum": [
                "A1",
                "A2",
                "B1",
                "B2",
                "C1",
                "C2"
              ],
              "example": "B2"
            }
          },
          {
            "name": "language",
            "in": "query",
            "description": "Filter by language",
            "schema": {
              "type": "string",
              "example": "en"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Expressions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Expressions retrieved successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "expressions": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Expression"
                          }
                        },
                        "pagination": {
                          "$ref": "#/components/schemas/PaginationResponse"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error getting expressions only",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/expressions/{expression}/expression": {
      "get": {
        "summary": "Find expression by expression text",
        "description": "Retrieve a specific expression by searching for its exact text",
        "tags": [
          "Expressions"
        ],
        "parameters": [
          {
            "name": "expression",
            "in": "path",
            "required": true,
            "description": "Expression text to search for",
            "schema": {
              "type": "string",
              "example": "break the ice"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Expression retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Expression retrieved successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Expression"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Expression not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error finding expression by expression text",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/expressions/{expressionId}/chat": {
      "post": {
        "summary": "Add chat message to expression",
        "description": "Add a user message to the expression chat history",
        "tags": [
          "Expressions",
          "Chat"
        ],
        "parameters": [
          {
            "name": "expressionId",
            "in": "path",
            "required": true,
            "description": "ID of the expression to add chat message to",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "description": "User message to add to chat",
                    "example": "Can you explain this expression better?"
                  }
                },
                "required": [
                  "message"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Chat message added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Chat message added successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "expression": {
                          "$ref": "#/components/schemas/Expression"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Message is required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Expression not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error adding chat message",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "Get chat history for expression",
        "description": "Retrieve the complete chat history for an expression",
        "tags": [
          "Expressions",
          "Chat"
        ],
        "parameters": [
          {
            "name": "expressionId",
            "in": "path",
            "required": true,
            "description": "ID of the expression to get chat history for",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Chat history retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Chat history retrieved successfully"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ChatMessage"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error getting chat history",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Clear chat history for expression",
        "description": "Delete all chat messages for an expression",
        "tags": [
          "Expressions",
          "Chat"
        ],
        "parameters": [
          {
            "name": "expressionId",
            "in": "path",
            "required": true,
            "description": "ID of the expression to clear chat history for",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Chat history cleared successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Chat history cleared successfully"
                    },
                    "data": {
                      "type": "object",
                      "example": {}
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Expression not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error clearing chat history",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/expressions/{expressionId}/chat/stream": {
      "post": {
        "summary": "Stream chat response for expression",
        "description": "Send a message and receive a streaming AI response for expression chat",
        "tags": [
          "Expressions",
          "Chat"
        ],
        "parameters": [
          {
            "name": "expressionId",
            "in": "path",
            "required": true,
            "description": "ID of the expression to chat about",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "description": "User message to send",
                    "example": "Can you give me more examples of this expression?"
                  }
                },
                "required": [
                  "message"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Streaming response started",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "description": "Streaming text response from AI"
                }
              }
            },
            "headers": {
              "Content-Type": {
                "schema": {
                  "type": "string",
                  "example": "text/plain; charset=utf-8"
                }
              },
              "Cache-Control": {
                "schema": {
                  "type": "string",
                  "example": "no-cache"
                }
              },
              "Connection": {
                "schema": {
                  "type": "string",
                  "example": "keep-alive"
                }
              }
            }
          },
          "400": {
            "description": "Message is required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Expression not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error streaming chat response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/lectures": {
      "get": {
        "summary": "Get all lectures",
        "description": "Retrieve a paginated list of lectures with optional filtering",
        "tags": [
          "Lectures"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Page number for pagination",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "search",
            "in": "query",
            "description": "Search term for filtering lectures",
            "schema": {
              "type": "string",
              "example": "renewable energy"
            }
          },
          {
            "name": "level",
            "in": "query",
            "description": "Filter by CEFR level",
            "schema": {
              "type": "string",
              "enum": [
                "A1",
                "A2",
                "B1",
                "B2",
                "C1",
                "C2"
              ],
              "example": "B1"
            }
          },
          {
            "name": "language",
            "in": "query",
            "description": "Filter by language",
            "schema": {
              "type": "string",
              "example": "en"
            }
          },
          {
            "name": "typeWrite",
            "in": "query",
            "description": "Filter by lecture type",
            "schema": {
              "type": "string",
              "example": "Article"
            }
          },
          {
            "name": "timeMin",
            "in": "query",
            "description": "Minimum reading time in seconds",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "example": 60
            }
          },
          {
            "name": "timeMax",
            "in": "query",
            "description": "Maximum reading time in seconds",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "example": 300
            }
          },
          {
            "name": "createdAfter",
            "in": "query",
            "description": "Filter by creation date after this date (ISO 8601)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2024-01-01T00:00:00Z"
            }
          },
          {
            "name": "createdBefore",
            "in": "query",
            "description": "Filter by creation date before this date (ISO 8601)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2024-12-31T23:59:59Z"
            }
          },
          {
            "name": "sortBy",
            "in": "query",
            "description": "Field to sort by",
            "schema": {
              "type": "string",
              "enum": [
                "createdAt",
                "updatedAt",
                "time",
                "level"
              ],
              "default": "createdAt",
              "example": "createdAt"
            }
          },
          {
            "name": "sortOrder",
            "in": "query",
            "description": "Sort order",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc",
              "example": "desc"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Lectures retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lectures retrieved successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "lectures": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Lecture"
                          }
                        },
                        "pagination": {
                          "$ref": "#/components/schemas/PaginationResponse"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error fetching lectures",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a new lecture",
        "description": "Create a new educational lecture with content, level, and metadata",
        "tags": [
          "Lectures"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Lecture"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Lecture created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lecture created successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Lecture"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error creating lecture",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/lectures/{id}": {
      "get": {
        "summary": "Get lecture by ID",
        "description": "Retrieve a specific lecture by its unique identifier",
        "tags": [
          "Lectures"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Unique identifier of the lecture",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Lecture Listed by ID successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lecture Listed by ID successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Lecture"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Lecture not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error retrieving lecture",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update lecture",
        "description": "Update an existing lecture with new content and metadata",
        "tags": [
          "Lectures"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Unique identifier of the lecture to update",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Lecture"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lecture Updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lecture Updated successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Lecture"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Lecture not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error updating lecture",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete lecture",
        "description": "Delete a lecture permanently",
        "tags": [
          "Lectures"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Unique identifier of the lecture to delete",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Lecture deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lecture deleted successfully"
                    },
                    "data": {
                      "type": "object",
                      "example": {}
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Lecture not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error deleting lecture",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/lectures/export-file": {
      "get": {
        "summary": "Export lectures to JSON",
        "description": "Export all lectures to a downloadable JSON file",
        "tags": [
          "Lectures"
        ],
        "responses": {
          "200": {
            "description": "Lectures exported successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Exported 50 lectures successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalLectures": {
                          "type": "integer",
                          "description": "Total number of lectures exported"
                        },
                        "exportDate": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Export timestamp"
                        },
                        "lectures": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Lecture"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "An error occurred while exporting lectures to JSON",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/lectures/import-file": {
      "post": {
        "summary": "Import lectures from JSON file",
        "description": "Import lectures from an uploaded JSON file with advanced options",
        "tags": [
          "Lectures"
        ],
        "parameters": [
          {
            "name": "duplicateStrategy",
            "in": "query",
            "description": "Strategy for handling duplicate lectures",
            "schema": {
              "type": "string",
              "enum": [
                "skip",
                "overwrite",
                "error",
                "merge"
              ],
              "default": "skip",
              "example": "skip"
            }
          },
          {
            "name": "validateOnly",
            "in": "query",
            "description": "Only validate without importing",
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ],
              "default": "false",
              "example": "false"
            }
          },
          {
            "name": "batchSize",
            "in": "query",
            "description": "Number of lectures to process per batch",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10,
              "example": 10
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "JSON file containing lectures data"
                  }
                },
                "required": [
                  "file"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Import completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Import completed successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "imported": {
                          "type": "integer",
                          "description": "Number of lectures imported"
                        },
                        "skipped": {
                          "type": "integer",
                          "description": "Number of lectures skipped"
                        },
                        "errors": {
                          "type": "integer",
                          "description": "Number of import errors"
                        },
                        "totalLectures": {
                          "type": "integer",
                          "description": "Total lectures in file (when validateOnly=true)"
                        },
                        "valid": {
                          "type": "integer",
                          "description": "Valid lectures count (when validateOnly=true)"
                        },
                        "invalid": {
                          "type": "integer",
                          "description": "Invalid lectures count (when validateOnly=true)"
                        },
                        "validationResults": {
                          "type": "array",
                          "description": "Detailed validation results (when validateOnly=true)"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "No file uploaded, Invalid JSON file format, or Invalid parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error importing lectures",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/lectures/generate-text": {
      "post": {
        "summary": "Generate lecture text with AI",
        "description": "Generate educational content for a lecture using AI with streaming response",
        "tags": [
          "Lectures"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "prompt": {
                    "type": "string",
                    "description": "Topic or prompt for the lecture (can be empty for random generation)",
                    "example": "The importance of renewable energy"
                  },
                  "level": {
                    "type": "string",
                    "enum": [
                      "A1",
                      "A2",
                      "B1",
                      "B2",
                      "C1",
                      "C2"
                    ],
                    "description": "CEFR level for the content",
                    "example": "B2"
                  },
                  "typeWrite": {
                    "type": "string",
                    "description": "Type of content to generate",
                    "example": "Article"
                  },
                  "addEasyWords": {
                    "type": "boolean",
                    "description": "Whether to include easy words in the generation",
                    "example": false
                  },
                  "language": {
                    "type": "string",
                    "description": "Language for the lecture",
                    "example": "en"
                  },
                  "rangeMin": {
                    "type": "integer",
                    "description": "Minimum word count range",
                    "example": 200
                  },
                  "rangeMax": {
                    "type": "integer",
                    "description": "Maximum word count range",
                    "example": 500
                  },
                  "grammarTopics": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Grammar topics to focus on",
                    "example": [
                      "present perfect",
                      "conditionals"
                    ]
                  },
                  "selectedWords": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Specific words to include in the content",
                    "example": [
                      "environment",
                      "sustainable",
                      "technology"
                    ]
                  }
                },
                "required": [
                  "prompt"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lecture text generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "description": "Streaming JSON response with generated content"
                }
              }
            },
            "headers": {
              "Content-Type": {
                "schema": {
                  "type": "string",
                  "example": "application/json"
                }
              }
            }
          },
          "400": {
            "description": "Prompt must be a string",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error trying to generate text stream",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/lectures/generate-topic-stream": {
      "post": {
        "summary": "Generate lecture topics with AI",
        "description": "Generate educational topics for lectures using AI with streaming response",
        "tags": [
          "Lectures"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "existingText": {
                    "type": "string",
                    "description": "Existing text to base topic generation on (optional, max 500 chars)",
                    "maxLength": 500,
                    "example": "This article discusses climate change"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "lecture",
                      "exam"
                    ],
                    "description": "Type of content to generate topics for",
                    "example": "lecture"
                  }
                },
                "required": [
                  "type"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Topics generated successfully",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "description": "Streaming text response with generated topics"
                }
              }
            },
            "headers": {
              "Content-Type": {
                "schema": {
                  "type": "string",
                  "example": "text/plain; charset=utf-8"
                }
              },
              "Cache-Control": {
                "schema": {
                  "type": "string",
                  "example": "no-cache"
                }
              },
              "Connection": {
                "schema": {
                  "type": "string",
                  "example": "keep-alive"
                }
              }
            }
          },
          "400": {
            "description": "Type is required and must be 'lecture' or 'exam', or Existing text cannot exceed 500 characters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error generating topic",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/lectures/generate-image/{idlecture}": {
      "post": {
        "summary": "Generate lecture image with AI",
        "description": "Generate an image for a specific lecture using AI and update the lecture record",
        "tags": [
          "Lectures"
        ],
        "parameters": [
          {
            "name": "idlecture",
            "in": "path",
            "required": true,
            "description": "ID of the lecture to generate image for",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "lectureString": {
                    "type": "string",
                    "description": "Lecture text to generate image for",
                    "example": "The importance of renewable energy in modern society"
                  },
                  "imgOld": {
                    "type": "string",
                    "description": "URL of old image to replace (optional)",
                    "example": "https://res.cloudinary.com/..."
                  }
                },
                "required": [
                  "lectureString"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lecture image updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lecture image updated successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Lecture"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Lecture prompt is required or Failed to generate image",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error generating lecture image",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/lectures/image/{id}": {
      "put": {
        "summary": "Update lecture image",
        "description": "Update the image URL for a specific lecture",
        "tags": [
          "Lectures"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "ID of the lecture to update image for",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "description": "New image URL",
                    "example": "https://example.com/new-image.jpg"
                  }
                },
                "required": [
                  "image"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lecture Update Image Lectue ById successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lecture Update Image Lectue ById successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Lecture"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Lecture not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error updating Image lecture",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users": {
      "get": {
        "summary": "Get all users",
        "description": "Retrieve a paginated list of users with optional filtering",
        "tags": [
          "Users"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Page number for pagination",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "username",
            "in": "query",
            "description": "Filter by username (partial match)",
            "schema": {
              "type": "string",
              "example": "john"
            }
          },
          {
            "name": "email",
            "in": "query",
            "description": "Filter by email (partial match)",
            "schema": {
              "type": "string",
              "example": "john@example.com"
            }
          },
          {
            "name": "role",
            "in": "query",
            "description": "Filter by user role (can be multiple, comma-separated)",
            "schema": {
              "type": "string",
              "enum": [
                "student",
                "teacher",
                "admin"
              ],
              "example": "student,teacher"
            }
          },
          {
            "name": "language",
            "in": "query",
            "description": "Filter by language (can be multiple, comma-separated)",
            "schema": {
              "type": "string",
              "example": "en,es"
            }
          },
          {
            "name": "isActive",
            "in": "query",
            "description": "Filter by active status",
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ],
              "example": "true"
            }
          },
          {
            "name": "phone",
            "in": "query",
            "description": "Filter by phone number (partial match)",
            "schema": {
              "type": "string",
              "example": "+1234567890"
            }
          },
          {
            "name": "address",
            "in": "query",
            "description": "Filter by address (partial match)",
            "schema": {
              "type": "string",
              "example": "New York"
            }
          },
          {
            "name": "createdAfter",
            "in": "query",
            "description": "Filter by creation date after this date (ISO 8601)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2024-01-01T00:00:00Z"
            }
          },
          {
            "name": "createdBefore",
            "in": "query",
            "description": "Filter by creation date before this date (ISO 8601)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2024-12-31T23:59:59Z"
            }
          },
          {
            "name": "updatedAfter",
            "in": "query",
            "description": "Filter by update date after this date (ISO 8601)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2024-01-01T00:00:00Z"
            }
          },
          {
            "name": "updatedBefore",
            "in": "query",
            "description": "Filter by update date before this date (ISO 8601)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2024-12-31T23:59:59Z"
            }
          },
          {
            "name": "sortBy",
            "in": "query",
            "description": "Field to sort by",
            "schema": {
              "type": "string",
              "enum": [
                "createdAt",
                "updatedAt",
                "username",
                "email"
              ],
              "default": "createdAt",
              "example": "createdAt"
            }
          },
          {
            "name": "sortOrder",
            "in": "query",
            "description": "Sort order",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc",
              "example": "desc"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Users listed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Users listed successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "users": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/User"
                          }
                        },
                        "pagination": {
                          "$ref": "#/components/schemas/PaginationResponse"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error listing users",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a new user",
        "description": "Create a new user account with profile information",
        "tags": [
          "Users"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/User"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "User created successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error creating user",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/users/{id}": {
      "get": {
        "summary": "Get user by ID",
        "description": "Retrieve a specific user by their unique identifier",
        "tags": [
          "Users"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Unique identifier of the user",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "User found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "User found"
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error getting user",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update user",
        "description": "Update an existing user with new data",
        "tags": [
          "Users"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Unique identifier of the user to update",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/User"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "User updated successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error updating user",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete user",
        "description": "Delete a user account permanently",
        "tags": [
          "Users"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Unique identifier of the user to delete",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "User deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "User deleted successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error deleting user",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/export-file": {
      "get": {
        "summary": "Export users to JSON",
        "description": "Export all users to a downloadable JSON file",
        "tags": [
          "Users"
        ],
        "responses": {
          "200": {
            "description": "Users exported successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Exported 25 users successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalUsers": {
                          "type": "integer",
                          "description": "Total number of users exported"
                        },
                        "exportDate": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Export timestamp"
                        },
                        "users": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/User"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "An error occurred while exporting users to JSON",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/users/import-file": {
      "post": {
        "summary": "Import users from JSON file",
        "description": "Import users from an uploaded JSON file with advanced options",
        "tags": [
          "Users"
        ],
        "parameters": [
          {
            "name": "duplicateStrategy",
            "in": "query",
            "description": "Strategy for handling duplicate users",
            "schema": {
              "type": "string",
              "enum": [
                "skip",
                "overwrite",
                "error",
                "merge"
              ],
              "default": "skip",
              "example": "skip"
            }
          },
          {
            "name": "validateOnly",
            "in": "query",
            "description": "Only validate without importing",
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ],
              "default": "false",
              "example": "false"
            }
          },
          {
            "name": "batchSize",
            "in": "query",
            "description": "Number of users to process per batch",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10,
              "example": 10
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "JSON file containing users data"
                  }
                },
                "required": [
                  "file"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Import completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Import completed successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "imported": {
                          "type": "integer",
                          "description": "Number of users imported"
                        },
                        "skipped": {
                          "type": "integer",
                          "description": "Number of users skipped"
                        },
                        "errors": {
                          "type": "integer",
                          "description": "Number of import errors"
                        },
                        "totalUsers": {
                          "type": "integer",
                          "description": "Total users in file (when validateOnly=true)"
                        },
                        "valid": {
                          "type": "integer",
                          "description": "Valid users count (when validateOnly=true)"
                        },
                        "invalid": {
                          "type": "integer",
                          "description": "Invalid users count (when validateOnly=true)"
                        },
                        "validationResults": {
                          "type": "array",
                          "description": "Detailed validation results (when validateOnly=true)"
                        },
                        "message": {
                          "type": "string",
                          "description": "Additional validation message (when validateOnly=true)"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "No file uploaded, Invalid JSON file format, Invalid file structure, or Invalid parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "An error occurred while importing users",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "summary": "Login user",
        "description": "Authenticate user with username and password",
        "tags": [
          "Authentication"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "username": {
                    "type": "string",
                    "description": "User's username",
                    "example": "novask88"
                  },
                  "password": {
                    "type": "string",
                    "description": "User's password",
                    "example": "sashateamomucho"
                  }
                },
                "required": [
                  "username",
                  "password"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Login successful"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "token": {
                          "type": "string",
                          "description": "JWT authentication token"
                        },
                        "refreshToken": {
                          "type": "string",
                          "description": "JWT refresh token"
                        },
                        "user": {
                          "type": "object",
                          "properties": {
                            "_id": {
                              "type": "string",
                              "description": "User ID"
                            },
                            "username": {
                              "type": "string",
                              "description": "Username"
                            },
                            "email": {
                              "type": "string",
                              "description": "User email"
                            },
                            "role": {
                              "type": "string",
                              "description": "User role"
                            },
                            "firstName": {
                              "type": "string",
                              "description": "First name"
                            },
                            "lastName": {
                              "type": "string",
                              "description": "Last name"
                            },
                            "image": {
                              "type": "string",
                              "description": "Profile image URL"
                            },
                            "language": {
                              "type": "string",
                              "description": "User's preferred language",
                              "default": "es"
                            },
                            "isActive": {
                              "type": "boolean",
                              "description": "Whether user is active"
                            },
                            "address": {
                              "type": "string",
                              "description": "User address"
                            },
                            "phone": {
                              "type": "string",
                              "description": "User phone number"
                            },
                            "lastLogin": {
                              "type": "string",
                              "format": "date-time",
                              "description": "Last login timestamp"
                            },
                            "createdAt": {
                              "type": "string",
                              "format": "date-time",
                              "description": "Account creation timestamp"
                            },
                            "updatedAt": {
                              "type": "string",
                              "format": "date-time",
                              "description": "Last update timestamp"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Username and password are required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Authentication failed - Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/auth/refresh": {
      "post": {
        "summary": "Refresh authentication token",
        "description": "Generate a new authentication token using a refresh token",
        "tags": [
          "Authentication"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "refreshToken": {
                    "type": "string",
                    "description": "Valid refresh token",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  }
                },
                "required": [
                  "refreshToken"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token refreshed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Token refreshed successfully"
                    },
                    "data": {
                      "type": "object",
                      "description": "New authentication tokens and user data"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Refresh token is required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Failed to refresh token - Invalid or expired refresh token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/labs/users/create-admin": {
      "post": {
        "summary": "Create admin user",
        "description": "Create an admin user for development and testing purposes",
        "tags": [
          "Labs",
          "Development"
        ],
        "responses": {
          "200": {
            "description": "Admin user created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Admin user created successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "$ref": "#/components/schemas/User"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error creating admin user",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/labs/backup/send-email": {
      "post": {
        "summary": "Send backup by email",
        "description": "Send a complete system backup via email with statistics of all data (words, lectures, expressions)",
        "tags": [
          "Labs",
          "Backup"
        ],
        "responses": {
          "200": {
            "description": "Backup sent by email successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Backup sent by email successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "wordsCount": {
                          "type": "integer",
                          "description": "Total number of words in backup",
                          "example": 1250
                        },
                        "lecturesCount": {
                          "type": "integer",
                          "description": "Total number of lectures in backup",
                          "example": 85
                        },
                        "expressionsCount": {
                          "type": "integer",
                          "description": "Total number of expressions in backup",
                          "example": 320
                        },
                        "emailSent": {
                          "type": "boolean",
                          "description": "Whether the email was sent successfully",
                          "example": true
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error sending backup by email",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Error sending backup: Connection timeout"
                    },
                    "error": {
                      "type": "string",
                      "description": "Detailed error message"
                    }
                  }
                }
              }
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ]
      }
    },
    "/api/upload-image/{entityType}/{entityId}": {
      "post": {
        "summary": "Upload image for entity",
        "description": "Upload an image file for a specific entity (word, lecture, or expression) and automatically update the entity's image field. Replaces any existing image.",
        "tags": [
          "Upload"
        ],
        "parameters": [
          {
            "name": "entityType",
            "in": "path",
            "required": true,
            "description": "Type of entity to upload image for",
            "schema": {
              "type": "string",
              "enum": [
                "word",
                "lecture",
                "expression"
              ],
              "example": "word"
            }
          },
          {
            "name": "entityId",
            "in": "path",
            "required": true,
            "description": "Unique identifier of the entity",
            "schema": {
              "type": "string",
              "pattern": "^[0-9a-fA-F]{24}$",
              "example": "507f1f77bcf86cd799439011"
            }
          },
          {
            "$ref": "#/components/parameters/AuthorizationHeader"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "imageFile": {
                    "type": "string",
                    "format": "binary",
                    "description": "Image file to upload (JPG, PNG, GIF, WebP)"
                  }
                },
                "required": [
                  "imageFile"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Image uploaded successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Image uploaded successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "img": {
                          "type": "string",
                          "description": "URL of the uploaded image on Cloudinary",
                          "example": "https://res.cloudinary.com/languagesai/image/upload/v1234567890/languagesai/words/abc123.jpg"
                        },
                        "entityId": {
                          "type": "string",
                          "description": "ID of the entity that was updated",
                          "example": "507f1f77bcf86cd799439011"
                        },
                        "entityType": {
                          "type": "string",
                          "description": "Type of entity that was updated",
                          "example": "word"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "No image file provided, Entity ID required, Invalid entity type, or Unsupported entity type",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Entity not found (word/lecture/expression with given ID does not exist)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error during upload or database update",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Unique identifier for the user"
          },
          "username": {
            "type": "string",
            "description": "Username for login",
            "example": "admin"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User's email address",
            "example": "admin@example.com"
          },
          "password": {
            "type": "string",
            "description": "User's password (hashed)"
          },
          "role": {
            "type": "string",
            "enum": [
              "admin",
              "user"
            ],
            "description": "User role",
            "example": "admin"
          },
          "firstName": {
            "type": "string",
            "description": "User's first name",
            "example": "John"
          },
          "lastName": {
            "type": "string",
            "description": "User's last name",
            "example": "Doe"
          },
          "image": {
            "type": "string",
            "description": "URL to user's profile image"
          },
          "language": {
            "type": "string",
            "description": "User's preferred language",
            "example": "es"
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the user account is active",
            "example": true
          },
          "address": {
            "type": "string",
            "description": "User's address"
          },
          "phone": {
            "type": "string",
            "description": "User's phone number"
          },
          "lastLogin": {
            "type": "string",
            "format": "date-time",
            "description": "Last login timestamp"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Account creation timestamp"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp"
          }
        }
      },
      "Word": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Unique identifier for the word"
          },
          "word": {
            "type": "string",
            "description": "The word itself",
            "example": "example"
          },
          "definition": {
            "type": "string",
            "description": "Definition of the word",
            "example": "A representative form or pattern"
          },
          "examples": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Example sentences using the word",
            "example": [
              "This is an example sentence"
            ]
          },
          "type": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Grammatical types of the word",
            "example": [
              "noun",
              "verb"
            ]
          },
          "IPA": {
            "type": "string",
            "description": "International Phonetic Alphabet pronunciation",
            "example": "/ɪɡˈzæmpəl/"
          },
          "seen": {
            "type": "number",
            "description": "Number of times the word has been seen",
            "example": 5
          },
          "img": {
            "type": "string",
            "description": "URL to word's image",
            "example": "https://example.com/image.jpg"
          },
          "level": {
            "type": "string",
            "enum": [
              "easy",
              "medium",
              "hard"
            ],
            "description": "Difficulty level of the word",
            "example": "medium"
          },
          "synonyms": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Synonyms of the word",
            "example": [
              "instance",
              "sample"
            ]
          },
          "codeSwitching": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Code-switching examples",
            "example": [
              "Este es un ejemplo"
            ]
          },
          "language": {
            "type": "string",
            "description": "Language of the word",
            "example": "en"
          },
          "spanish": {
            "type": "object",
            "description": "Spanish translation",
            "properties": {
              "definition": {
                "type": "string",
                "example": "Un ejemplo representativo"
              },
              "word": {
                "type": "string",
                "example": "ejemplo"
              }
            }
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Lecture": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Unique identifier for the lecture"
          },
          "time": {
            "type": "number",
            "description": "Reading time in seconds",
            "example": 300
          },
          "level": {
            "type": "string",
            "description": "CEFR level (A1, A2, B1, B2, C1, C2)",
            "example": "B1"
          },
          "typeWrite": {
            "type": "string",
            "description": "Type of content (Article, Story, etc.)",
            "example": "Article"
          },
          "language": {
            "type": "string",
            "description": "Language of the lecture",
            "example": "en"
          },
          "img": {
            "type": "string",
            "description": "URL to lecture's image"
          },
          "urlAudio": {
            "type": "string",
            "description": "URL to audio file"
          },
          "content": {
            "type": "string",
            "description": "Main content of the lecture in Markdown format",
            "example": "# Example Lecture\n\nThis is an example lecture content."
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Expression": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Unique identifier for the expression"
          },
          "expression": {
            "type": "string",
            "description": "The expression itself",
            "example": "break the ice"
          },
          "definition": {
            "type": "string",
            "description": "Definition of the expression",
            "example": "To initiate conversation in a social setting"
          },
          "examples": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Example sentences using the expression",
            "example": [
              "Let me break the ice by introducing myself"
            ]
          },
          "level": {
            "type": "string",
            "enum": [
              "A1",
              "A2",
              "B1",
              "B2",
              "C1",
              "C2"
            ],
            "description": "CEFR level of the expression",
            "example": "B2"
          },
          "language": {
            "type": "string",
            "description": "Language of the expression",
            "example": "en"
          },
          "type": {
            "type": "string",
            "description": "Type of expression (idiom, phrase, etc.)",
            "example": "idiom"
          },
          "img": {
            "type": "string",
            "description": "URL to expression's image"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ChatMessage": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Unique identifier for the chat message"
          },
          "role": {
            "type": "string",
            "enum": [
              "user",
              "assistant"
            ],
            "description": "Role of the message sender",
            "example": "user"
          },
          "content": {
            "type": "string",
            "description": "Content of the message",
            "example": "Can you explain this word?"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "When the message was sent"
          }
        }
      },
      "AuthRequest": {
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "properties": {
          "username": {
            "type": "string",
            "description": "Username for authentication",
            "example": "admin"
          },
          "password": {
            "type": "string",
            "description": "Password for authentication",
            "example": "adminpassword"
          }
        }
      },
      "AuthResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Login successful"
          },
          "data": {
            "type": "object",
            "properties": {
              "token": {
                "type": "string",
                "description": "JWT access token",
                "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              },
              "refreshToken": {
                "type": "string",
                "description": "JWT refresh token"
              },
              "user": {
                "$ref": "#/components/schemas/User"
              }
            }
          }
        }
      },
      "RefreshTokenRequest": {
        "type": "object",
        "required": [
          "refreshToken"
        ],
        "properties": {
          "refreshToken": {
            "type": "string",
            "description": "Refresh token to get new access token"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "example": "Error message"
          },
          "error": {
            "type": "string",
            "example": "Detailed error information"
          }
        }
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Operation successful"
          },
          "data": {
            "type": "object",
            "description": "Response data"
          }
        }
      },
      "PaginationResponse": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "description": "Current page number",
            "example": 1
          },
          "limit": {
            "type": "integer",
            "description": "Number of items per page",
            "example": 10
          },
          "total": {
            "type": "integer",
            "description": "Total number of items",
            "example": 100
          },
          "pages": {
            "type": "integer",
            "description": "Total number of pages",
            "example": 10
          }
        }
      },
      "AnkiCard": {
        "type": "object",
        "properties": {
          "front": {
            "type": "string",
            "description": "Front side of the card"
          },
          "back": {
            "type": "string",
            "description": "Back side of the card"
          },
          "word": {
            "type": "string",
            "description": "Word for the card"
          }
        }
      },
      "AIGenerationRequest": {
        "type": "object",
        "properties": {
          "prompt": {
            "type": "string",
            "description": "Prompt for AI generation"
          },
          "language": {
            "type": "string",
            "description": "Target language",
            "example": "en"
          },
          "level": {
            "type": "string",
            "description": "Difficulty level",
            "example": "B2"
          }
        }
      }
    },
    "parameters": {
      "MiperroHeader": {
        "name": "Miperro",
        "in": "header",
        "description": "Header personalizado global",
        "required": false,
        "schema": {
          "type": "string",
          "default": "gaott"
        }
      },
      "AuthorizationHeader": {
        "name": "Authorization",
        "in": "header",
        "description": "Authorization header global - Token: eyJhbGciOiJIUzI1NiIs...",
        "required": true,
        "schema": {
          "type": "string",
          "default": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7Il9pZCI6IjY4YmYyNTQxZWVkNDU0YjAxMjAyN2NjNSIsInVzZXJuYW1lIjoibm92YXNrODgiLCJlbWFpbCI6ImFkbWluQGV4YW1wbGUuY29tIiwicGFzc3dvcmQiOiIkMmIkMTAkMkxQeTBQbkFKbEJoWlprR3BnYnAzLlJCWEc2S3k5SnFRMy56VURFMjFhbENGdHNUbG9ibFciLCJyb2xlIjoiYWRtaW4iLCJmaXJzdE5hbWUiOiJTeXN0ZW0iLCJsYXN0TmFtZSI6IkFkbWluaXN0cmF0b3IiLCJsYW5ndWFnZSI6ImVzIiwiaXNBY3RpdmUiOnRydWUsImNyZWF0ZWRBdCI6IjIwMjUtMDktMDhUMTg6NDk6MzcuMzA4WiIsInVwZGF0ZWRBdCI6IjIwMjUtMDktMDlUMjM6NDQ6NTkuMDkwWiIsIl9fdiI6MCwibGFzdExvZ2luIjoiMjAyNS0wOS0wOVQyMzo0NDo1OS4wODZaIn0sImlhdCI6MTc1NzQ2MTQ5OSwiZXhwIjoxNzU4MDY2Mjk5fQ.XsmrIyI7BE_Wfaix3aAPs1LtsF3oMYHUB9OHBxVLqTw"
        }
      }
    }
  }
}