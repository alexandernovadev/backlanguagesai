openapi: 3.0.0
info:
  title: Word API
  version: 2.0.0
  description: API for managing words, AI generation, and learning features
paths:
  # ===== STATIC ROUTES =====
  /api/words/get-cards-anki:
    get:
      summary: Get recent hard or medium words for Anki cards
      tags:
        - Words
      description: Retrieves 30 randomly shuffled words with difficulty 'hard' or 'medium' for Anki-style learning
      responses:
        '200':
          description: Successfully retrieved words for Anki cards
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "List Recent Hard Or Medium Words successfully"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Word'
        '500':
          description: Internal server error

  /api/words/get-words-for-review:
    get:
      summary: Get words for intelligent review
      tags:
        - Words
      description: Retrieves words that need review based on difficulty and frequency
      parameters:
        - in: query
          name: limit
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
          description: Maximum number of words to return
      responses:
        '200':
          description: Successfully retrieved words for review
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Words for review retrieved successfully"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Word'
        '500':
          description: Internal server error

  /api/words/get-review-stats:
    get:
      summary: Get review statistics
      tags:
        - Words
      description: Retrieves statistics about word review progress
      responses:
        '200':
          description: Successfully retrieved review statistics
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Review statistics retrieved successfully"
                  data:
                    $ref: '#/components/schemas/ReviewStats'
        '500':
          description: Internal server error

  /api/words/by-type/{type}:
    get:
      summary: Get words by grammatical type
      tags:
        - Words
      parameters:
        - in: path
          name: type
          required: true
          schema:
            type: string
            enum: [noun, verb, adjective, adverb, personal pronoun, possessive pronoun, preposition, conjunction, determiner, article, quantifier, interjection, auxiliary verb, modal verb, infinitive, participle, gerund, other, phrasal verb]
          description: Grammatical type to filter by
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 100
          description: Maximum number of words to return
        - in: query
          name: search
          schema:
            type: string
          description: Search term for word or definition
      responses:
        '200':
          description: Successfully retrieved words by type
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Words of type noun retrieved successfully"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Word'
        '500':
          description: Internal server error

  /api/words/by-type-optimized:
    get:
      summary: Get words by type (optimized)
      tags:
        - Words
      parameters:
        - in: query
          name: type
          required: true
          schema:
            type: string
            enum: [noun, verb, adjective, adverb, personal pronoun, possessive pronoun, preposition, conjunction, determiner, article, quantifier, interjection, auxiliary verb, modal verb, infinitive, participle, gerund, other, phrasal verb]
          description: Grammatical type to filter by
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 100
          description: Maximum number of words to return
        - in: query
          name: wordUser
          schema:
            type: string
          description: Search term for word
        - in: query
          name: fields
          schema:
            type: string
          description: Fields to include in response
      responses:
        '200':
          description: Successfully retrieved words by type
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Words of type noun retrieved successfully"
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        word:
                          type: string
                          example: "challenge"
        '400':
          description: Type parameter is required
        '500':
          description: Internal server error

  /api/words/words-only:
    get:
      summary: Get words only (optimized)
      tags:
        - Words
      description: Retrieves only word names with pagination and filters
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
            minimum: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
            minimum: 1
          description: Number of words per page
        - in: query
          name: wordUser
          schema:
            type: string
          description: Filter words by partial text match
        - in: query
          name: difficulty
          schema:
            type: string
            enum: [easy, medium, hard]
          description: Filter by difficulty level(s)
        - in: query
          name: language
          schema:
            type: string
          description: Filter by language(s)
        - in: query
          name: type
          schema:
            type: string
            enum: [noun, verb, adjective, adverb, personal pronoun, possessive pronoun, preposition, conjunction, determiner, article, quantifier, interjection, auxiliary verb, modal verb, infinitive, participle, gerund, other, phrasal verb]
          description: Filter by grammatical type(s)
        - in: query
          name: fields
          schema:
            type: string
          description: Fields to include in response
      responses:
        '200':
          description: Successfully retrieved words
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Words retrieved successfully"
                  data:
                    type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            word:
                              type: string
                              example: "challenge"
                      total:
                        type: integer
                        example: 150
                      page:
                        type: integer
                        example: 1
                      pages:
                        type: integer
                        example: 15
        '500':
          description: Internal server error

  # ===== DYNAMIC ROUTES =====
  /api/words/{word}/word:
    get:
      summary: Find word by name
      tags:
        - Words
      parameters:
        - in: path
          name: word
          required: true
          schema:
            type: string
          description: Word to search for
      responses:
        '200':
          description: Word found successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Get Word successFully"
                  data:
                    $ref: '#/components/schemas/Word'
        '404':
          description: Word not found
        '500':
          description: Internal server error

  /api/words/{wordId}/update-review:
    post:
      summary: Update word review progress
      tags:
        - Words
      parameters:
        - in: path
          name: wordId
          required: true
          schema:
            type: string
          description: Word ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                difficulty:
                  type: integer
                  minimum: 1
                  maximum: 5
                  description: Difficulty rating (1-5)
                quality:
                  type: integer
                  minimum: 1
                  maximum: 5
                  description: Quality rating (1-5)
              required:
                - difficulty
                - quality
      responses:
        '200':
          description: Word review updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Word review updated successfully"
                  data:
                    $ref: '#/components/schemas/Word'
        '400':
          description: Invalid parameters
        '404':
          description: Word not found
        '500':
          description: Internal server error

  # ===== CHAT ROUTES =====
  /api/words/{wordId}/chat:
    post:
      summary: Add chat message
      tags:
        - Words
      parameters:
        - in: path
          name: wordId
          required: true
          schema:
            type: string
          description: Word ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  description: Chat message content
              required:
                - message
      responses:
        '200':
          description: Chat message added successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Chat message added successfully"
                  word:
                    $ref: '#/components/schemas/Word'
        '400':
          description: Message is required
        '404':
          description: Word not found
        '500':
          description: Internal server error

    get:
      summary: Get chat history
      tags:
        - Words
      parameters:
        - in: path
          name: wordId
          required: true
          schema:
            type: string
          description: Word ID
      responses:
        '200':
          description: Chat history retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ChatMessage'
        '500':
          description: Internal server error

    delete:
      summary: Clear chat history
      tags:
        - Words
      parameters:
        - in: path
          name: wordId
          required: true
          schema:
            type: string
          description: Word ID
      responses:
        '200':
          description: Chat history cleared successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Chat history cleared successfully"
                  word:
                    $ref: '#/components/schemas/Word'
        '404':
          description: Word not found
        '500':
          description: Internal server error

  /api/words/{wordId}/chat/stream:
    post:
      summary: Stream chat response
      tags:
        - Words
      parameters:
        - in: path
          name: wordId
          required: true
          schema:
            type: string
          description: Word ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  description: Chat message content
              required:
                - message
      responses:
        '200':
          description: Streaming chat response
          content:
            text/plain:
              schema:
                type: string
                example: "This is a streaming response..."
        '400':
          description: Message is required
        '404':
          description: Word not found
        '500':
          description: Internal server error

  # ===== AI GENERATION ROUTES =====
  /api/words/generate:
    post:
      summary: Generate word with AI
      tags:
        - Words
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                prompt:
                  type: string
                  description: Word to generate
                language:
                  type: string
                  default: "en"
                  description: Language code
              required:
                - prompt
      responses:
        '200':
          description: Word generated and saved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Word generated and saved successfully"
                  data:
                    $ref: '#/components/schemas/Word'
        '400':
          description: Prompt is required
        '500':
          description: Error generating or saving word

  /api/words/{idword}/generate-examples:
    post:
      summary: Generate word examples with AI
      tags:
        - Words
      parameters:
        - in: path
          name: idword
          required: true
          schema:
            type: string
          description: Word ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                prompt:
                  type: string
                  description: Word to generate examples for
                word:
                  type: string
                  description: Alternative word parameter
                language:
                  type: string
                  default: "en"
                  description: Language code
                oldExamples:
                  type: array
                  items:
                    type: string
                  description: Existing examples
      responses:
        '200':
          description: Word examples updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Word examples updated successfully"
                  data:
                    $ref: '#/components/schemas/Word'
        '400':
          description: Prompt (word) is required
        '404':
          description: Word not found
        '500':
          description: Error generating word examples

  /api/words/{idword}/generate-code-switching:
    post:
      summary: Generate code-switching examples with AI
      tags:
        - Words
      parameters:
        - in: path
          name: idword
          required: true
          schema:
            type: string
          description: Word ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                prompt:
                  type: string
                  description: Word to generate examples for
                word:
                  type: string
                  description: Alternative word parameter
                language:
                  type: string
                  default: "en"
                  description: Language code
                oldExamples:
                  type: array
                  items:
                    type: string
                  description: Existing examples
      responses:
        '200':
          description: Word code-switching updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Word code-switching updated successfully"
                  data:
                    $ref: '#/components/schemas/Word'
        '400':
          description: Prompt (word) is required
        '404':
          description: Word not found
        '500':
          description: Error generating word code-switching examples

  /api/words/{idword}/generate-types:
    post:
      summary: Generate word types with AI
      tags:
        - Words
      parameters:
        - in: path
          name: idword
          required: true
          schema:
            type: string
          description: Word ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                prompt:
                  type: string
                  description: Word to generate types for
                word:
                  type: string
                  description: Alternative word parameter
                language:
                  type: string
                  default: "en"
                  description: Language code
                oldExamples:
                  type: array
                  items:
                    type: string
                  description: Existing examples
      responses:
        '200':
          description: Word types updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Word types updated successfully"
                  data:
                    $ref: '#/components/schemas/Word'
        '400':
          description: Prompt (word) is required
        '404':
          description: Word not found
        '500':
          description: Error generating word types

  /api/words/{idword}/generate-synonyms:
    post:
      summary: Generate word synonyms with AI
      tags:
        - Words
      parameters:
        - in: path
          name: idword
          required: true
          schema:
            type: string
          description: Word ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                prompt:
                  type: string
                  description: Word to generate synonyms for
                word:
                  type: string
                  description: Alternative word parameter
                language:
                  type: string
                  default: "en"
                  description: Language code
                oldExamples:
                  type: array
                  items:
                    type: string
                  description: Existing examples
      responses:
        '200':
          description: Word synonyms updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Word synonyms updated successfully"
                  data:
                    $ref: '#/components/schemas/Word'
        '400':
          description: Prompt (word) is required
        '404':
          description: Word not found
        '500':
          description: Error generating word synonyms

  /api/words/{idword}/generate-image:
    post:
      summary: Generate word image with AI
      tags:
        - Words
      parameters:
        - in: path
          name: idword
          required: true
          schema:
            type: string
          description: Word ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                wordString:
                  type: string
                  description: Word description for image generation
                word:
                  type: string
                  description: Alternative word parameter
                imgOld:
                  type: string
                  description: URL of old image to replace
      responses:
        '200':
          description: Word image updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Word image updated successfully"
                  data:
                    $ref: '#/components/schemas/Word'
        '400':
          description: Word prompt is required
        '500':
          description: Error generating word image

  # ===== CRUD ROUTES =====
  /api/words:
    get:
      summary: Get words with pagination and filters
      tags:
        - Words
      description: Retrieve a paginated list of words with comprehensive filtering options
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
            minimum: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
            minimum: 1
          description: Number of words per page
        - in: query
          name: wordUser
          schema:
            type: string
          description: Filter words by partial text match (case insensitive)
        - in: query
          name: difficulty
          schema:
            type: string
            enum: [easy, medium, hard]
          description: Filter words by difficulty level(s). Multiple values separated by commas
        - in: query
          name: language
          schema:
            type: string
          description: Filter words by language(s). Multiple values separated by commas
        - in: query
          name: type
          schema:
            type: string
            enum: [noun, verb, adjective, adverb, personal pronoun, possessive pronoun, preposition, conjunction, determiner, article, quantifier, interjection, auxiliary verb, modal verb, infinitive, participle, gerund, other, phrasal verb]
          description: Filter words by grammatical type(s). Multiple values separated by commas
        - in: query
          name: seenMin
          schema:
            type: integer
            minimum: 0
          description: Minimum number of times the word has been seen
        - in: query
          name: seenMax
          schema:
            type: integer
            minimum: 0
          description: Maximum number of times the word has been seen
        - in: query
          name: sortBy
          schema:
            type: string
            enum: [createdAt, updatedAt, word, difficulty, seen, language, definition]
            default: createdAt
          description: Field to sort by
        - in: query
          name: sortOrder
          schema:
            type: string
            enum: [asc, desc]
            default: desc
          description: Sort order (ascending or descending)
        - in: query
          name: definition
          schema:
            type: string
          description: Filter words by definition content (case insensitive)
        - in: query
          name: IPA
          schema:
            type: string
          description: Filter words by IPA phonetic transcription (case insensitive)
        - in: query
          name: hasImage
          schema:
            type: string
            enum: [true, false]
          description: Filter words that have or don't have an image
        - in: query
          name: hasExamples
          schema:
            type: string
            enum: [true, false]
          description: Filter words that have or don't have examples
        - in: query
          name: hasSynonyms
          schema:
            type: string
            enum: [true, false]
          description: Filter words that have or don't have synonyms
        - in: query
          name: hasCodeSwitching
          schema:
            type: string
            enum: [true, false]
          description: Filter words that have or don't have code-switching examples
        - in: query
          name: spanishWord
          schema:
            type: string
          description: Filter words by Spanish translation (case insensitive)
        - in: query
          name: spanishDefinition
          schema:
            type: string
          description: Filter words by Spanish definition (case insensitive)
        - in: query
          name: createdAfter
          schema:
            type: string
            format: date-time
          description: Filter words created after this date (ISO 8601 format)
        - in: query
          name: createdBefore
          schema:
            type: string
            format: date-time
          description: Filter words created before this date (ISO 8601 format)
        - in: query
          name: updatedAfter
          schema:
            type: string
            format: date-time
          description: Filter words updated after this date (ISO 8601 format)
        - in: query
          name: updatedBefore
          schema:
            type: string
            format: date-time
          description: Filter words updated before this date (ISO 8601 format)
      responses:
        '200':
          description: Successfully retrieved words
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Words successfully listed"
                  data:
                    type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Word'
                      total:
                        type: integer
                        example: 150
                      page:
                        type: integer
                        example: 1
                      pages:
                        type: integer
                        example: 15
        '500':
          description: Internal server error

    post:
      summary: Create a new word
      tags:
        - Words
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WordInput'
      responses:
        '201':
          description: Word created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Word created successfully"
                  data:
                    $ref: '#/components/schemas/Word'
        '400':
          description: Validation error
        '500':
          description: Internal server error

  /api/words/{id}:
    get:
      summary: Get word by ID
      tags:
        - Words
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Word ID
      responses:
        '200':
          description: Word retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Word listed by Id successfully"
                  data:
                    $ref: '#/components/schemas/Word'
        '404':
          description: Word not found
        '500':
          description: Internal server error

    put:
      summary: Update word
      tags:
        - Words
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Word ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WordInput'
      responses:
        '200':
          description: Word updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Word updated successfully"
                  data:
                    $ref: '#/components/schemas/Word'
        '404':
          description: Word not found
        '500':
          description: Internal server error

    delete:
      summary: Delete word
      tags:
        - Words
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Word ID
      responses:
        '200':
          description: Word deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Word deleted successfully"
                  data:
                    type: object
        '404':
          description: Word not found
        '500':
          description: Internal server error

  /api/words/{id}/level:
    put:
      summary: Update word difficulty level
      tags:
        - Words
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Word ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                difficulty:
                  type: string
                  enum: [easy, medium, hard]
                  description: New difficulty level
              required:
                - difficulty
      responses:
        '200':
          description: Word level updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Word level updated successfully"
                  data:
                    type: object
                    properties:
                      difficulty:
                        type: string
                        example: "medium"
        '404':
          description: Word not found
        '500':
          description: Internal server error

  /api/words/{id}/increment-seen:
    put:
      summary: Increment word seen count
      tags:
        - Words
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Word ID
      responses:
        '200':
          description: Word seen count incremented successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Word seen count incremented successfully"
                  data:
                    type: object
                    properties:
                      seen:
                        type: number
                        example: 6
        '404':
          description: Word not found
        '500':
          description: Internal server error

  # ===== IMPORT/EXPORT ROUTES =====
  /api/words/export-file:
    get:
      summary: Export words to JSON file
      tags:
        - Words
      description: Downloads a JSON file containing all words in the database
      security:
        - BearerAuth: []
      responses:
        '200':
          description: JSON file with all words
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Exported 150 words successfully"
                  data:
                    type: object
                    properties:
                      totalWords:
                        type: number
                        example: 150
                      exportDate:
                        type: string
                        format: date-time
                        example: "2025-01-15T10:30:00.000Z"
                      words:
                        type: array
                        items:
                          $ref: '#/components/schemas/Word'
        '401':
          description: Unauthorized - Token not provided
        '403':
          description: Forbidden - Invalid token
        '500':
          description: Internal server error

  /api/words/import-file:
    post:
      summary: Import words from JSON file
      tags:
        - Words
      description: Import words from a JSON file with various duplicate handling strategies
      parameters:
        - in: query
          name: duplicateStrategy
          schema:
            type: string
            enum: [skip, overwrite, error, merge]
            default: skip
          description: Strategy to handle duplicate words
        - in: query
          name: validateOnly
          schema:
            type: boolean
            default: false
          description: If true, only validates the file without importing
        - in: query
          name: batchSize
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of words to process in each batch
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - file
              properties:
                file:
                  type: string
                  format: binary
                  description: JSON file containing words to import
      responses:
        '200':
          description: Import completed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Import completed successfully"
                  data:
                    $ref: '#/components/schemas/ImportResult'
        '400':
          description: Bad request - Invalid file format or parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Invalid JSON file format"
        '500':
          description: Internal server error during import

components:
  schemas:
    Word:
      type: object
      properties:
        _id:
          type: string
          example: "507f1f77bcf86cd799439011"
        word:
          type: string
          example: "challenge"
          minLength: 1
          maxLength: 100
        definition:
          type: string
          example: "A difficult task or situation that requires effort to overcome."
          minLength: 5
          maxLength: 1000
        examples:
          type: array
          items:
            type: string
          example:
            - "Starting a new job comes with its own set of challenges."
            - "The project presented several challenges."
        type:
          type: array
          items:
            type: string
            enum: [noun, verb, adjective, adverb, personal pronoun, possessive pronoun, preposition, conjunction, determiner, article, quantifier, interjection, auxiliary verb, modal verb, infinitive, participle, gerund, other, phrasal verb]
          example: ["noun", "verb"]
        IPA:
          type: string
          example: "/ˈtʃæl.ɪn.dʒ/"
        seen:
          type: number
          example: 5
          minimum: 0
        img:
          type: string
          nullable: true
          example: "https://res.cloudinary.com/example/image/upload/v1234567890/challenge.png"
          description: Optional image URL (can be empty or null)
        difficulty:
          type: string
          enum: [easy, medium, hard]
          example: "medium"
          default: "hard"
        sinonyms:
          type: array
          items:
            type: string
          example: ["difficulty", "obstacle", "hurdle"]
        codeSwitching:
          type: array
          items:
            type: string
          example:
            - "Enfrentamos varios challenges al implementar el proyecto."
            - "La vida está llena de challenges que nos ayudan a crecer."
        language:
          type: string
          example: "en"
        spanish:
          type: object
          properties:
            definition:
              type: string
              example: "Situaciones o tareas difíciles que requieren esfuerzo y determinación para superarse."
              minLength: 5
              maxLength: 1000
            word:
              type: string
              example: "desafío"
              minLength: 1
              maxLength: 100
        chat:
          type: array
          items:
            $ref: '#/components/schemas/ChatMessage'
          description: Chat history with AI
        createdAt:
          type: string
          format: date-time
          example: "2025-01-15T10:30:00.000Z"
        updatedAt:
          type: string
          format: date-time
          example: "2025-01-15T10:30:00.000Z"
      required:
        - word
        - definition
        - language

    WordInput:
      type: object
      properties:
        word:
          type: string
          minLength: 1
          maxLength: 100
        definition:
          type: string
          minLength: 5
          maxLength: 1000
        examples:
          type: array
          items:
            type: string
        type:
          type: array
          items:
            type: string
            enum: [noun, verb, adjective, adverb, personal pronoun, possessive pronoun, preposition, conjunction, determiner, article, quantifier, interjection, auxiliary verb, modal verb, infinitive, participle, gerund, other, phrasal verb]
        IPA:
          type: string
        seen:
          type: number
          minimum: 0
        img:
          type: string
        difficulty:
          type: string
          enum: [easy, medium, hard]
        sinonyms:
          type: array
          items:
            type: string
        codeSwitching:
          type: array
          items:
            type: string
        language:
          type: string
        spanish:
          type: object
          properties:
            definition:
              type: string
              minLength: 5
              maxLength: 1000
            word:
              type: string
              minLength: 1
              maxLength: 100
      required:
        - word
        - definition
        - language

    ChatMessage:
      type: object
      properties:
        id:
          type: string
          example: "abc123def"
        role:
          type: string
          enum: [user, assistant]
          example: "user"
        content:
          type: string
          example: "Can you explain this word better?"
        timestamp:
          type: string
          format: date-time
          example: "2025-01-15T10:30:00.000Z"
      required:
        - id
        - role
        - content
        - timestamp

    ReviewStats:
      type: object
      properties:
        totalWords:
          type: integer
          example: 150
          description: Total number of words available for review
        wordsReviewedToday:
          type: integer
          example: 25
          description: Number of words reviewed today
        wordsDueForReview:
          type: integer
          example: 45
          description: Number of words due for review
        averageSeen:
          type: number
          example: 3.2
          description: Average number of times words have been seen
        difficultyDistribution:
          type: object
          properties:
            easy:
              type: integer
              example: 50
            medium:
              type: integer
              example: 75
            hard:
              type: integer
              example: 25
          description: Distribution of words by difficulty level

    ImportResult:
      type: object
      properties:
        totalWords:
          type: integer
          example: 314
        totalBatches:
          type: integer
          example: 32
        totalValid:
          type: integer
          example: 310
        totalInvalid:
          type: integer
          example: 2
        totalDuplicates:
          type: integer
          example: 2
        totalErrors:
          type: integer
          example: 0
        totalInserted:
          type: integer
          example: 308
        totalUpdated:
          type: integer
          example: 2
        totalSkipped:
          type: integer
          example: 4
        batches:
          type: array
          items:
            $ref: '#/components/schemas/BatchResult'
        summary:
          $ref: '#/components/schemas/ImportSummary'

    BatchResult:
      type: object
      properties:
        batchIndex:
          type: integer
          example: 0
        processed:
          type: integer
          example: 10
        valid:
          type: integer
          example: 9
        invalid:
          type: integer
          example: 1
        duplicates:
          type: integer
          example: 0
        errors:
          type: integer
          example: 0
        inserted:
          type: integer
          example: 9
        updated:
          type: integer
          example: 0
        skipped:
          type: integer
          example: 1
        results:
          type: array
          items:
            $ref: '#/components/schemas/ProcessingResult'
          description: Optional detailed results for each word in the batch

    ProcessingResult:
      type: object
      properties:
        index:
          type: integer
          example: 0
        data:
          $ref: '#/components/schemas/Word'
        status:
          type: string
          enum: [valid, invalid, duplicate, error]
          example: "valid"
        validationResult:
          $ref: '#/components/schemas/ValidationResult'
        error:
          type: string
          example: "Database connection error"
        action:
          type: string
          enum: [skipped, inserted, updated, merged]
          example: "inserted"

    ValidationResult:
      type: object
      properties:
        isValid:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: string
          example: []
        warnings:
          type: array
          items:
            type: string
          example: ["Definition is very long (>1,000 characters)"]

    ImportSummary:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Import completed. 308 inserted, 2 updated, 4 skipped, 0 errors"
        duration:
          type: integer
          example: 1250

tags:
  - name: Words
    description: Word management, AI generation, and learning features